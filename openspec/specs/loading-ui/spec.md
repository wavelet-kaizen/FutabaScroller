# loading-ui Specification

## Purpose
TBD - created by archiving change add-multi-thread-merge. Update Purpose after archive.
## Requirements
### Requirement: ローディングオーバーレイ表示
システムは、外部スレッド取得中にローディングオーバーレイを表示しなければならない（SHALL）。

#### Scenario: ローディング開始
- **WHEN** システムが追加スレッドURLのfetchを開始する
- **THEN** 画面中央にローディングオーバーレイを表示する
- **AND** オーバーレイには「スレッド取得中...」のテキストが表示される
- **AND** 回転アニメーション（CSSアニメーション）が表示される

#### Scenario: ローディング終了
- **WHEN** 全ての追加スレッドのfetchとDOM統合が完了する
- **THEN** ローディングオーバーレイを非表示にする

#### Scenario: エラー時の表示
- **WHEN** スレッド取得中にネットワークエラーが発生する
- **THEN** ローディングオーバーレイ内にエラーメッセージを表示する
- **AND** マージ処理全体を中断し、ローディングオーバーレイを非表示にしてユーザーに通知する

### Requirement: ローディング進捗の表示
システムは、複数スレッド取得時に進捗を表示しなければならない（SHALL）。

#### Scenario: 複数スレッド取得の進捗
- **WHEN** 3つの追加スレッドURLが指定されている
- **THEN** ローディングオーバーレイに「スレッド取得中... (1/3)」のように現在の進捗を表示する
- **AND** 各スレッドのfetchが完了するごとに進捗が更新される（「2/3」、「3/3」）

#### Scenario: 単一スレッド取得
- **WHEN** 追加スレッドURLが1つのみ指定されている
- **THEN** ローディングオーバーレイに「スレッド取得中...」と表示する（進捗番号なし）

### Requirement: ローディングUIのスタイル
システムは、既存のオーバーレイUIと一貫性のあるスタイルでローディングを表示しなければならない（SHALL）。

#### Scenario: スタイルの一貫性
- **WHEN** ローディングオーバーレイを表示する
- **THEN** 背景色、フォント、余白は既存の StatusOverlay / SpeedOverlay と同じスタイルを使用する
- **AND** z-indexは他のオーバーレイより高い値（例: 10001）を設定し、最前面に表示する

#### Scenario: アニメーション
- **WHEN** ローディングオーバーレイを表示する
- **THEN** 回転アニメーションはCSSの `@keyframes` を使用し、無限ループで回転する
- **AND** アニメーションは滑らかで視覚的にストレスを与えないスピード（例: 1秒で1回転）とする

